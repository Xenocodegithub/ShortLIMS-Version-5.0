
@{
    ViewBag.Title = "Admin";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
@*@Html.Hidden("enquiry", (object)ViewBag.TotalEnquiry)
@Html.Hidden("TotalSampleTypeWise", (object)ViewBag.SampleMonthItemViewBag)*@
<div class="mobile-menu-overlay"></div>
<div class="main-container">
    <div class="xs-pd-20-10 pd-ltr-20">

        <div class="title pb-20">
            <h4 class="h4 mb-0">Dashboard</h4>
        </div>

        <div class="row pb-10">
            <div class="col-xl-3 col-lg-3 col-md-6 mb-20">
                <div class="card-box height-100-p widget-style3">
                    <div class="d-flex flex-wrap">
                        <div class="widget-data">
                            <div class="weight-750 font-24 text-dark">@LIMS_DEMO.LIMS.User.TotalEnquiryCount</div>
                            <div class="font-14 text-secondary weight-500">Total Enquiry</div>
                        </div>
                        <div class="widget-icon">
                            <div class="icon" data-color="#00eccf"><i class="icon-copy dw dw-calendar1"></i></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-6 mb-20">
                <div class="card-box height-100-p widget-style3">
                    <div class="d-flex flex-wrap">
                        <div class="widget-data">
                            <div class="weight-750 font-24 text-dark">₹@LIMS_DEMO.LIMS.User.TotalPOAmount</div>
                            <div class="font-14 text-secondary weight-500">Purchase Amount</div>
                        </div>
                        <div class="widget-icon">
                            <div class="icon" data-color="#ff5b5b"><span class="icon-copy fa fa-inr"></span></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-6 mb-20">
                <div class="card-box height-100-p widget-style3">
                    <div class="d-flex flex-wrap">
                        <div class="widget-data">
                            <div class="weight-750 font-24 text-dark">@LIMS_DEMO.LIMS.User.TotalSampleCollectedCount</div>
                            <div class="font-14 text-secondary weight-500">Sample Collected</div>
                        </div>
                        <div class="widget-icon">
                            <div class="icon"><i class="icon-copy fi-social-dropbox" aria-hidden="true"></i></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-xl-3 col-lg-3 col-md-6 mb-20">
                <div class="card-box height-100-p widget-style3">
                    <div class="d-flex flex-wrap">
                        <div class="widget-data">
                            <div class="weight-750 font-24 text-dark">₹@LIMS_DEMO.LIMS.User.TotalRevenue</div>
                            <div class="font-14 text-secondary weight-500">Total Revenue</div>
                        </div>
                        <div class="widget-icon">
                            <div class="icon" data-color="#09cc06"><i class="icon-copy fa fa-money" aria-hidden="true"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row pb-10">
            <div class="col-md-8 mb-20">
                <div class="card-box height-100-p pd-20">
                    <div class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3">
                        <div class="h5 mb-md-0">Lab Activities</div>
                    </div>
                    <div id="activities-chart1"></div>
                </div>
            </div>
            <div class="col-md-4 mb-20">
                <div class="card-box min-height-200px pd-20 mb-20" data-bgcolor="#455a64">
                    <div class="d-flex justify-content-between pb-20 text-white">
                        <div class="icon h1 text-white">
                            <i class="fa fa-calendar" aria-hidden="true"></i>
                            <!-- <i class="icon-copy fa fa-stethoscope" aria-hidden="true"></i> -->
                        </div>
                        <div class="font-14 text-right">
                            <div><i class="icon-copy ion-arrow-up-c"></i></div>
                            <div class="font-12">Since last month</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-end">
                        <div class="text-white">
                            <div class="font-14">Total WorkOrders</div>
                            <div class="font-24 weight-500">@LIMS_DEMO.LIMS.User.TotalWOCount</div>
                        </div>
                        <div class="max-width-150">
                            <div id="appointment"></div>
                        </div>
                    </div>
                </div>
                <div class="card-box min-height-200px pd-20" data-bgcolor="#265ed7">
                    <div class="d-flex justify-content-between pb-20 text-white">
                        <div class="icon h1 text-white">
                            <i class="fa fa-stethoscope" aria-hidden="true"></i>
                        </div>
                        <div class="font-14 text-right">
                            <div><i class="icon-copy ion-arrow-down-c"></i> 3.69%</div>
                            <div class="font-12">Since last month</div>
                        </div>
                    </div>
                    <div class="d-flex justify-content-between align-items-end">
                        <div class="text-white">
                            <div class="font-14">Enquiry</div>
                            <div class="font-24 weight-500">@LIMS_DEMO.LIMS.User.TotalEnquiryCount</div>
                        </div>
                        <div class="max-width-150">
                            <div id="surgery-chart"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 mb-30">
                <div class="pd-20 card-box height-100-p">
                    <h4 class="h4 text-blue">Radial Bar Chart</h4>
                    <div id="chart9"></div>
                </div>
            </div>
        </div>
        <div class="bg-white pd-20 card-box mb-30">
            <h4 class="h4 text-blue"></h4>
            <div id="chart100"></div>
        </div>


        <!--<div class="row pb-10">
    <div class="col-md-6 mb-20">
        <div class="card-box height-100-p pd-20">
            <div class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3">
                <div class="h5 mb-md-0">Total Enquiries Per Month</div>
            </div>
            <div class="box-body" id="graphContainerEnquiry">

                <canvas id="EnquiryChart"></canvas>

            </div>-->
        @*<div id="activities-chart"></div>*@
        <!--</div>
    </div>
    <div class="col-md-6 mb-20">
        <div class="card-box height-100-p pd-20">
            <div class="d-flex flex-wrap justify-content-between align-items-center pb-0 pb-md-3">
                <div class="h5 mb-md-0">Total Sample Collected On The Basis Of Sample Type</div>
            </div>
            <div class="box-body" id="graphTotalSampleMonth">

                <canvas id="TotalSampleMonthChart"></canvas>

            </div>-->
        @*<div id="activities-chart"></div>*@
        <!--</div>
    </div>-->
        <!--<div class="col-md-4 mb-20">
    <div class="card-box min-height-200px pd-20 mb-20" data-bgcolor="#455a64">
        <div class="d-flex justify-content-between pb-20 text-white">
            <div class="icon h1 text-white">
                <i class="fa fa-calendar" aria-hidden="true"></i>-->
        <!-- <i class="icon-copy fa fa-stethoscope" aria-hidden="true"></i> -->
        <!--</div>
                <div class="font-14 text-right">
                    <div><i class="icon-copy ion-arrow-up-c"></i> 2.69%</div>
                    <div class="font-12">Since last month</div>
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-end">
                <div class="text-white">
                    <div class="font-14">Appointment</div>
                    <div class="font-24 weight-500">1865</div>
                </div>
                <div class="max-width-150">
                    <div id="appointment-chart"></div>
                </div>
            </div>
        </div>
        <div class="card-box min-height-200px pd-20" data-bgcolor="#265ed7">
            <div class="d-flex justify-content-between pb-20 text-white">
                <div class="icon h1 text-white">
                    <i class="fa fa-stethoscope" aria-hidden="true"></i>
                </div>
                <div class="font-14 text-right">
                    <div><i class="icon-copy ion-arrow-down-c"></i> 3.69%</div>
                    <div class="font-12">Since last month</div>
                </div>
            </div>
            <div class="d-flex justify-content-between align-items-end">
                <div class="text-white">
                    <div class="font-14">Surgery</div>
                    <div class="font-24 weight-500">250</div>
                </div>
                <div class="max-width-150">
                    <div id="surgery-chart"></div>
                </div>
            </div>
        </div>
    </div>-->
        <!--</div>

    <div class="row">
        <div class="col-lg-4 col-md-6 mb-20">
            <div class="card-box height-100-p pd-20 min-height-200px">
                <div class="d-flex justify-content-between pb-10">
                    <div class="h5 mb-0">Total WorkOrders Per Month</div>

                </div>
                <div class="box-body" id="graphTotal">
                    <canvas id="WOChart"></canvas>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-20">
            <div class="card-box height-100-p pd-20 min-height-200px">
                <div class="card-box widget-style3">
                    <div class="d-flex flex-wrap">
                        <div class="widget-data">
                            <div class="weight-700 font-24 text-dark">@LIMS_DEMO.LIMS.User.TotalWOCount</div>
                            <div class="font-14 text-secondary weight-500">Total WorkOrders</div>
                        </div>
                        <div class="widget-icon">
                            <div class="icon" data-color="#09cc06"><i class="icon-copy fa fa-plus" aria-hidden="true"></i></div>
                        </div>
                    </div>
                </div>
                <br />
                <div class="card-box widget-style3">
                    <div class="d-flex flex-wrap">
                        <div class="widget-data">
                            <div class="weight-700 font-24 text-dark">@LIMS_DEMO.LIMS.User.TotalPOAmount</div>
                            <div class="font-14 text-secondary weight-500">Total Purchase Amount</div>
                        </div>
                        <div class="widget-icon">
                            <div class="icon" data-color="#09cc06"><i class="icon-copy fa fa-rupee" aria-hidden="true"></i></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-4 col-md-6 mb-20">
            <div class="card-box height-100-p pd-20 min-height-200px">
                <div class="d-flex justify-content-between">
                    <div class="h5 mb-0">Total Purchase Amount Per Month</div>

                </div>

                <div class="box-body" id="graphContainerPurchaseMonth">
                    <canvas id="PurchaseMonthChart"></canvas>
                </div>
            </div>
        </div>
    </div>

    <div class="card-box pb-10">
        <div class="card-box height-100-p pd-20 min-height-200px">
            <div class="d-flex justify-content-between">
                <div class="h5 mb-0">Total Sample Collected Per Month</div>

            </div>

            <div class="box-body" id="graphContainerSampleCollecteMonthWise">
                <canvas id="SampleCollecteMonthWiseChart"></canvas>
            </div>
        </div>
    </div>-->

        <div class="footer-wrap pd-20 mb-20 card-box">
            InfoLIMS - <a href="" target="_blank"></a>
        </div>
    </div>
    </div>
<script src="~/Component/plugins/apexcharts/apexcharts-setting.js"></script>
@*<script src="~/Scripts/chartjs/Chart.min.js"></script>

<script src="~/Scripts/Application/ApplicationSystem.js"></script>
<script src="~/Scripts/Application/makeAjaxRequest.js"></script>*@
@Scripts.Render("~/bundles/Home")
<script type="text/javascript">
    $(document).ready(function () {
        debugger
        //Home.initialize();
       
        //    debugger;
        //    //Home.GetTotalEnquiry($('#enquiry').val())
        //    Home.GetEnq()
        //    //Home.GetTotalEnquiry($('#enquiry').val())
        //    Home.GetTotalSampleTypeWise()
        //    Home.GetTotalWO()
        //    Home.GetTotalSampleMonthWise()
        //    Home.GetTotalPurchaseMonth()
        LineChart();
        MixChart();
        WeekChart();
        PaiChart();
    });
    function MixChart() {
        $.ajax({
            url: '/Dashboard/Dashboard/GetTotalSampleTestedMonthWise',
            type: 'Get',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            dataType: 'json',
            success: function (result) {
                debugger;
                var data2 = [];
                var data3 = [];
                var categories1 = [];
                if (result != null) {
                    $.each(result.data, function (i, item) {
                        data2.push(item.count);
                        data3.push(item.count1);
                        categories1.push(item.Month + "/" + item.Year);
                    });
                }

                var options = {
                    series: [
                        {
                            name: "Sample Tested",
                            data: data2,
                        },
                        {
                            name: "Total Sample",
                            data: data3,
                        }
                    ],
                    chart: {
                        height: 300,
                        type: 'line',
                        zoom: {
                            enabled: false,
                        },
                        dropShadow: {
                            enabled: true,
                            color: '#000',
                            top: 18,
                            left: 7,
                            blur: 16,
                            opacity: 0.2
                        },
                        toolbar: {
                            show: false
                        }
                    },
                    colors: ['#e83e8c', '#6610f2'],
                    dataLabels: {
                        enabled: true,
                    },
                    stroke: {
                        width: [3, 3],
                        curve: 'smooth'
                    },
                    grid: {
                        show: false,
                    },
                    markers: {
                        colors: ['#e83e8c', '#6610f2'],
                        size: 5,
                        strokeColors: '#ffffff',
                        strokeWidth: 2,
                        hover: {
                            sizeOffset: 2
                        }
                    },
                    xaxis: {
                        categories: categories1 /*['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']*/,
                        labels: {
                            style: {
                                colors: '#8c9094'
                            }
                        }
                    },
                    yaxis: {
                        min: 0,
                        max: 35,
                        labels: {
                            style: {
                                colors: '#8c9094'
                            }
                        }
                    },
                    legend: {
                        position: 'top',
                        horizontalAlign: 'right',
                        floating: true,
                        offsetY: 0,
                        labels: {
                            useSeriesColors: true
                        },
                        markers: {
                            width: 10,
                            height: 10,
                        }
                    }
                };
                var chart = new ApexCharts(document.querySelector("#activities-chart1"), options);
                chart.render();
            }
        });
    }
    function LineChart() {

        $.ajax({
            url: '/Dashboard/Dashboard/GetTotalQuotationMonthWise',
            type: 'Get',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            dataType: 'json',
            success: function (data) {
                debugger;
                var categories = [];
                var data1 = [];
                if (data != null) {
                    $.each(data.data, function (i, item) {
                        categories.push(item.Month + "/" + item.Year);
                        data1.push(item.count);
                    });
                    var options = {
                        series: [{
                            name: 'Quotation',
                            data: data1,
                        }],
                        chart: {
                            height: 350,
                            type: 'line',
                            toolbar: {
                                show: false,
                            }
                        },
                        grid: {
                            show: false,
                            padding: {
                                left: 0,
                                right: 0
                            }
                        },
                        stroke: {
                            width: 7,
                            curve: 'smooth'
                        },
                        xaxis: {
                            type: 'datetime',
                            categories: categories,
                        },
                        title: {
                            text: 'Samples Per Month',
                            align: 'left',
                            style: {
                                fontSize: "16px",
                                color: '#666'
                            }
                        },
                        fill: {
                            type: 'gradient',
                            gradient: {
                                shade: 'dark',
                                gradientToColors: ['#1b00ff'],
                                shadeIntensity: 1,
                                type: 'horizontal',
                                opacityFrom: 1,
                                opacityTo: 1,
                                stops: [0, 100, 100, 100]
                            },
                        },
                        markers: {
                            size: 4,
                            colors: ["#FFA41B"],
                            strokeColors: "#fff",
                            strokeWidth: 2,
                            hover: {
                                size: 7,
                            }
                        },
                        yaxis: {
                            min: 0,
                            max: 100,
                            title: {
                                text: 'Number of sample',
                            },
                        }
                    };
                    var chart = new ApexCharts(document.querySelector("#chart100"), options);
                    chart.render();

                }
            }
        });
    }
    function WeekChart() {
        $.ajax({
            url: '/Dashboard/Dashboard/GetTotalWO',
            type: 'Get',
            contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
            dataType: 'json',
            success: function (result) {
                debugger;
                var data4 = [];
                var DAY1 = 0;
                var DAY2 = 0;
                var DAY3 = 0;
                var DAY4 = 0;
                var DAY5 = 0;
                var DAY6 = 0;
                var DAY7 = 0;
                if (result != null) {
                    $.each(result.data, function (i, item) {
                        if (item.Day == 'Monday') {
                            DAY1=(item.count);
                        }
                        else if (item.Day == 'Tuesday')
                        {
                            DAY2=(item.count);
                        } else if (item.Day == 'Wednesday')
                        {
                            DAY3=(item.count);
                        }
                        else if (item.Day == 'Thursday')
                        {
                            DAY4=(item.count);
                        } else if (item.Day == 'Friday')
                        {
                            DAY5=(item.count);
                        }
                        else if (item.Day == 'Saturday')
                        {
                            DAY6=(item.count);
                        }
                        else if (item.Day == 'Sunday') {
                            DAY7=(item.count);
                        }
                    });
                }
                var options2 = {
                        series: [{
                            name: 'Workorder',
                            data: [{
                                x: 'Monday',
                                y: DAY1
                            }, {
                                x: 'Tuesday',
                                y: DAY2
                            }, {
                                x: 'Wednesday',
                                y: DAY3
                            }, {
                                x: 'Thursday',
                                y: DAY4
                            }, {
                                x: 'Friday',
                                y: DAY5
                            }, {
                                x: 'Saturday',
                                y: DAY6
                            }, {
                                x: 'Sunday',
                                y: DAY7
                            }],
                        }],
                   
                    chart: {
                        height: 100,
                        type: 'bar',
                        toolbar: {
                            show: false,
                        },
                        sparkline: {
                            enabled: true
                        },
                    },
                    plotOptions: {
                        bar: {
                            columnWidth: '25px',
                            distributed: true,
                            endingShape: 'rounded',
                        }
                    },
                    dataLabels: {
                        enabled: false
                    },
                    legend: {
                        show: false
                    },
                    xaxis: {
                        type: 'category',
                        lines: {
                            show: false,
                        },
                        axisBorder: {
                            show: false,
                        },
                        labels: {
                            show: false,
                        },
                    },
                    yaxis: [{
                        y: 0,
                        offsetX: 0,
                        offsetY: 0,
                        labels: {
                            show: false,
                        },
                        padding: {
                            left: 0,
                            right: 0
                        },
                    }],
                };
                var chart2 = new ApexCharts(document.querySelector("#appointment"), options2);
                chart2.render();
            }
        });
    }
    function PaiChart() {
        var options9 = {
            series: [76, 67, 61, 90],
            chart: {
                height: 390,
                type: 'radialBar',
            },
            plotOptions: {
                radialBar: {
                    offsetY: 0,
                    startAngle: 0,
                    endAngle: 270,
                    hollow: {
                        margin: 5,
                        size: '40%',
                        background: 'transparent',
                        image: undefined,
                    },
                    dataLabels: {
                        name: {
                            show: false,
                        },
                        value: {
                            show: false,
                        }
                    }
                }
            },
            colors: ['#20c997', '#ffc107', '#e83e8c', '#6610f2'],
            labels: ['Workorder complete', 'Workorder Executed', 'Workorder', 'Enquiry'],
            legend: {
                show: true,
                floating: true,
                fontSize: '14px',
                position: 'left',
                offsetX: 40,
                offsetY: 15,
                labels: {
                    useSeriesColors: true,
                },
                markers: {
                    size: 0
                },
                formatter: function (seriesName, opts) {
                    return seriesName + ":  " + opts.w.globals.series[opts.seriesIndex]
                },
                itemMargin: {
                    vertical: 3
                }
            },
            responsive: [{
                breakpoint: 480,
                options: {
                    legend: {
                        show: false
                    }
                }
            }]
        };
        var chart = new ApexCharts(document.querySelector("#chart9"), options9);
        chart.render();
    }
</script>
